<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BETTO BLAESPP - PORTAFOLIO</title>

<style>
*{box-sizing:border-box;}
body{margin:0;background:#0f0f0f;font-family:sans-serif;color:#eee;}
header{background:linear-gradient(135deg,#ff416c,#ff4b2b);padding:40px 20px;text-align:center;}
header img{max-width:120px;border-radius:15px;border:2px solid #fff;}
.filters{text-align:center;margin:20px 0;position:sticky;top:0;background:#0f0f0f;padding:10px;z-index:10;border-bottom:1px solid #333;}
.filters button{background:transparent;border:2px solid #ff4b2b;color:#fff;padding:10px 18px;margin:5px;border-radius:25px;cursor:pointer;font-weight:bold;transition:0.3s;}
.filters button.active{background:#ff4b2b;}

#gallery{display:grid;gap:20px;padding:20px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));max-width:1200px;margin:auto;}
.image-container{background:#1a1a1a;padding:15px;border-radius:12px;border:1px solid #333;animation:fadeIn 0.5s ease;}
.image-container img{width:100%;border-radius:8px;cursor:pointer;height:300px;object-fit:cover;}
.like-btn{background:#ff4b2b;border:none;color:white;padding:10px;margin:10px 0;border-radius:6px;width:100%;font-weight:bold;cursor:pointer;transition:0.2s;}
.like-btn:hover{opacity:0.9;}

/* Comentarios */
.comment-list{font-size:13px;color:#ccc;max-height:120px;overflow-y:auto;margin-bottom:8px;}
.comment-item{background:#222;margin:4px 0;padding:8px;border-radius:5px;display:flex;justify-content:space-between;align-items:center;}
.comment-item span{flex:1;margin-left:5px;}
.comment-item b{color:#ff4b2b;font-size:11px;}
.comment-input{width:100%;padding:10px;background:#000;border:1px solid #444;color:#fff;border-radius:5px;}
.delete-btn{background:#ff4b2b;color:#fff;border:none;padding:3px 6px;border-radius:4px;margin-left:5px;cursor:pointer;font-size:11px;transition:0.2s;}
.delete-btn:hover{opacity:0.8;}

/* SECCIONES */
#infoSection,#chatSection{background:#1a1a1a;padding:30px;margin:20px auto;border-radius:15px;text-align:center;max-width:600px;border:1px solid #ff4b2b;display:none;}

/* CHAT */
#chat-box{height:400px;overflow-y:auto;background:#000;border-radius:10px;padding:15px;text-align:left;margin-bottom:15px;border:1px solid #333;}
.msg{margin-bottom:10px;padding:8px;border-radius:5px;background:#222;}
.msg b{color:#ff4b2b;display:block;font-size:12px;}
.msg span{font-size:14px;}
.msg.me{border-left:4px solid #ff4b2b;}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;justify-content:center;align-items:center;z-index:1000;}
.modal.active{display:flex;}
.modal img{max-width:90%;max-height:90%;border-radius:10px;}

@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
</style>
</head>

<body>

<header>
<img src="curriculum.jpg" alt="BETTO">
<h1>BETTO BLAESPP</h1>
<p>Artista Visual</p>
<p>ILUSTRACI√ìN ¬∑ C√ìMIC ¬∑ WEB MANGA ¬∑ COMISIONES</p>
</header>

<div class="filters">
<button onclick="showInfo(event)">CONTACTO</button>
<button class="filter-btn active" onclick="loadImages('ILUSTRACION',event)">ILUSTRACI√ìN</button>
<button class="filter-btn" onclick="loadImages('SFW',event)">SFW</button>
<button class="filter-btn" onclick="askNSFW(event)">NSFW üîû</button>
<button class="filter-btn" onclick="loadImages('FONDOS',event)">FONDOS</button>
<button class="filter-btn" onclick="loadImages('COMICS',event)">C√ìMICS</button>
<button onclick="showChat(event)" style="border-color:#55acee;">üí¨ CHAT GLOBAL</button>
</div>

<div id="gallery"></div>

<div id="infoSection">
<h2>üë§ SOBRE M√ç</h2>
<p><strong>BETTO BLAESPP</strong></p>
<p>ILUSTRADOR DIGITAL ¬∑ C√ìMIC ¬∑ MANGA ¬∑ COMISIONES</p>
    <p>
      L√≠neas que golpean, miradas que cuentan historias y mundos que nacen del trazo.<br />
      Soy Betto, ilustrador digital que fusiona la potencia del c√≥mic con la intensidad del manga. Cada ilustraci√≥n 
      es una escena viva, cada personaje tiene alma y cada obra est√° dise√±ada para impactar. Creo arte original, c√≥mics y comisiones 
      que transforman ideas en im√°genes que no se olvidan. Si buscas ilustraci√≥n con car√°cter, energ√≠a y narrativa visual real‚Ä¶ aqu√≠ empieza tu historia.
    </p>
<h3>üì¨ CONTACTO</h3>
<ul>
      <li>üìß Email: <a href="mailto:bblaespp@gmail.com" target="_blank" rel="noopener noreferrer">bblaespp@gmail.com</a></li>
      <li>üì∏ Instagram: <a href="https://instagram.com/BBLAESPP" target="_blank" rel="noopener noreferrer">@BBLAESPP</a></li>
      <li>üì± WhatsApp: <a href="https://wa.me/3152395773" target="_blank" rel="noopener noreferrer">3152395773</a></li>
    </ul>
</div>

<div id="chatSection">
<h2>üí¨ CHAT GLOBAL</h2>
<p id="user-display" style="font-size:12px;color:#888;"></p>
<div id="chat-box"></div>
<input type="text" id="chat-input" class="comment-input" placeholder="Escribe un mensaje y pulsa Enter...">
</div>

<div class="modal" id="modal" onclick="this.classList.remove('active')">
<img id="modalImg">
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import { getDatabase, ref, push, onValue, runTransaction, get, serverTimestamp, query, limitToLast, remove } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

const firebaseConfig={
apiKey:"AIzaSyAUlqdn5gBdF3J4dfk690t48xXF_oofqFc",
authDomain:"base-de-datos-para-pagina.firebaseapp.com",
databaseURL:"https://base-de-datos-para-pagina-default-rtdb.firebaseio.com",
projectId:"base-de-datos-para-pagina",
storageBucket:"base-de-datos-para-pagina.firebasestorage.app",
messagingSenderId:"427794640215",
appId:"1:427794640215:web:22ce4fa44954e572c3e212"
};

const app=initializeApp(firebaseConfig);
const db=getDatabase(app);

// USUARIO
if(!localStorage.getItem("user_token")) localStorage.setItem("user_token","u_"+Math.random().toString(36).substr(2,9));
const myToken=localStorage.getItem("user_token");

let myName = localStorage.getItem("user_name");
if(!myName){
    myName = prompt("¬°Bienvenido! Introduce tu nombre de usuario:") || "An√≥nimo_" + Math.floor(Math.random()*999);
    localStorage.setItem("user_name", myName);
}
document.getElementById('user-display').textContent="Conectado como: "+myName;

// IM√ÅGENES
const images={
ILUSTRACION:["ILUSTRACION/1.png","ILUSTRACION/2.png","ILUSTRACION/3.png"],
SFW:["sfw/1.png"],
NSFW:["nsfw/1.png"],
FONDOS:["FONDOS/X.png"],
COMICS:["COMICS/3.png","COMICS/4.png","COMICS/PAG1.png","COMICS/PAG2.png","COMICS/PAG3.png","COMICS/PAG4.png","COMICS/PAG5.png"]
};
const sanitize=p=>p.replace(/[.#$[\]]/g,"_");

// OCULTAR TODO
function hideAll(){
document.getElementById("gallery").style.display="none";
document.getElementById("infoSection").style.display="none";
document.getElementById("chatSection").style.display="none";
document.querySelectorAll(".filters button").forEach(b=>b.classList.remove("active"));
}

// GALER√çAS
window.loadImages=(cat,e)=>{
hideAll();
if(e) e.target.classList.add("active");
const gallery=document.getElementById("gallery");
gallery.innerHTML="";
gallery.style.display="grid";

const catMayus=cat.toUpperCase();
(images[catMayus]||[]).forEach(src=>{
const id=sanitize(src);
const card=document.createElement("div");
card.className="image-container";
card.innerHTML=`
<img src="${src}" onclick="document.getElementById('modalImg').src='${src}';document.getElementById('modal').classList.add('active')">
<button class="like-btn" id="like-${id}">‚ù§Ô∏è ME GUSTA</button>
<div class="comment-list" id="list-${id}"></div>
<input class="comment-input" id="input-${id}" placeholder="Escribe un comentario...">
`;
gallery.appendChild(card);

// LIKES
onValue(ref(db,`likes/${id}`),snap=>{
const total=snap.exists()?Object.keys(snap.val()).length:0;
if(document.getElementById(`like-${id}`)) document.getElementById(`like-${id}`).textContent=`‚ù§Ô∏è ME GUSTA (${total})`;
});
document.getElementById(`like-${id}`).onclick=async()=>{
const likeRef=ref(db,`likes/${id}/${myToken}`);
const snap=await get(likeRef);
if(snap.exists()) return alert("YA DISTE LIKE ‚ù§Ô∏è");
runTransaction(likeRef,()=>true);
};

// COMENTARIOS
onValue(ref(db,`comments/${id}`),snap=>{
const list=document.getElementById(`list-${id}`);
if(!list) return;
list.innerHTML="";
snap.forEach(child=>{
const d=child.val();
const key=child.key;
const div=document.createElement("div");
div.className="comment-item";
div.innerHTML=`<b>${d.user}:</b> <span>${d.text}</span>`;

// BOT√ìN BORRAR SOLO SI ES TU COMENTARIO
if(d.authorToken===myToken){
const btn=document.createElement("button");
btn.className="delete-btn";
btn.textContent="‚úñ";
btn.onclick=()=>remove(ref(db,`comments/${id}/${key}`));
div.appendChild(btn);
}

list.appendChild(div);
});
});

// NUEVO COMENTARIO
document.getElementById(`input-${id}`).onkeydown=(ev)=>{
if(ev.key==="Enter" && ev.target.value.trim()){
push(ref(db,`comments/${id}`),{
text:ev.target.value.trim(),
user:myName,
authorToken:myToken
});
ev.target.value="";
}
};
});
};

// CHAT
window.showChat=(e)=>{
hideAll();
e.target.classList.add("active");
document.getElementById("chatSection").style.display="block";
};

const chatBox=document.getElementById("chat-box");
const chatInput=document.getElementById("chat-input");

onValue(query(ref(db,'chat'),limitToLast(50)),snap=>{
chatBox.innerHTML="";
snap.forEach(child=>{
const d=child.val();
const div=document.createElement("div");
div.className=`msg ${d.token===myToken?'me':''}`;
div.innerHTML=`<b>${d.user}</b><span>${d.text}</span>`;
chatBox.appendChild(div);
});
chatBox.scrollTop=chatBox.scrollHeight;
});

chatInput.onkeydown=(e)=>{
if(e.key==="Enter" && chatInput.value.trim()){
push(ref(db,'chat'),{
user:myName,
text:chatInput.value.trim(),
token:myToken,
time:serverTimestamp()
});
chatInput.value="";
}
};

// CONTACTO
window.showInfo=(e)=>{ hideAll(); e.target.classList.add("active"); document.getElementById("infoSection").style.display="block"; };

// NSFW
window.askNSFW=(e)=>{
if(confirm("üîû Contenido para adultos. ¬øEres mayor de edad?")){
loadImages("NSFW");
if(e) e.target.classList.add("active");
}
};

// CARGA INICIAL
loadImages("ILUSTRACION");
</script>
</body>
</html>
