<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BETTO BLAESPP - PORTAFOLIO</title>

<style>
*{box-sizing:border-box;}
body{margin:0;background:#0f0f0f;color:#eee;font-family:sans-serif;}
header{text-align:center;padding:40px;background:linear-gradient(135deg,#ff416c,#ff4b2b);}

.filters{
text-align:center;
padding:10px;
position:sticky;
top:0;
background:#0f0f0f;
z-index:99;
}

.filters button{
border:2px solid #ff4b2b;
background:none;
color:#fff;
padding:10px 20px;
margin:5px;
border-radius:30px;
font-weight:bold;
cursor:pointer;
}

.filters button.active{
background:#ff4b2b;
color:#111;
}

section{
max-width:1300px;
margin:auto;
padding:20px;
display:none;
}

section.active{display:block;}

#gallery{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
gap:20px;
}

.image-container{
background:#1a1a1a;
padding:12px;
border-radius:12px;
border:1px solid #333;
}

.image-container img{
width:100%;
border-radius:8px;
cursor:pointer;
}

.modal{
position:fixed;
inset:0;
background:rgba(0,0,0,.9);
display:none;
justify-content:center;
align-items:center;
z-index:9999;
}

.modal.active{display:flex;}

.modal img{
max-width:90%;
max-height:90%;
border-radius:10px;
}

/* CHAT */

#chatBox{
height:320px;
overflow:auto;
background:#000;
padding:12px;
border-radius:10px;
margin-bottom:10px;
border:1px solid #333;
}

.chat-msg span{color:#ff4b2b;font-weight:bold;}

.chat-controls{
display:flex;
gap:8px;
}

.chat-controls input{
flex:1;
padding:10px;
background:#111;
border:1px solid #333;
color:white;
border-radius:8px;
}

.chat-controls button{
background:#ff4b2b;
border:none;
color:white;
padding:10px 18px;
border-radius:8px;
font-weight:bold;
cursor:pointer;
}

/* NOTIFICACIONES */

#notifyBell{
position:fixed;
top:20px;
right:20px;
background:#111;
border:2px solid #ff4b2b;
width:52px;
height:52px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:24px;
cursor:pointer;
z-index:9999;
}

#notifyCount{
position:absolute;
top:-6px;
right:-6px;
background:red;
color:white;
font-size:11px;
padding:3px 6px;
border-radius:50%;
display:none;
}

#notifyPanel{
position:fixed;
top:80px;
right:20px;
width:300px;
max-height:400px;
background:#111;
border:2px solid #ff4b2b;
border-radius:15px;
overflow:auto;
display:none;
z-index:9999;
}

.notify-item{
padding:10px;
border-bottom:1px solid #222;
font-size:13px;
}

/* CONTACTO */

#contacto{
text-align:center;
font-size:18px;
line-height:1.8;
}

#contacto a{
color:#ff4b2b;
text-decoration:none;
font-weight:bold;
}

/* RANKING */

#rankingList div{
padding:8px;
border-bottom:1px solid #222;
}

.rank{color:#ff4b2b;font-weight:bold;}

</style>
</head>

<body>

<header>
<h1>BETTO BLAESPP</h1>
<p>ILUSTRADOR DIGITAL ¬∑ C√ìMIC ¬∑ MANGA</p>
</header>

<div class="filters">
<button class="active" onclick="showSection('galeria')">ILUSTRACI√ìN</button>
<button onclick="showSection('chat')">CHAT ONLINE</button>
<button onclick="showSection('ranking')">RANKING</button>
<button onclick="askNSFW()">NSFW üîû</button>
<button onclick="showSection('contacto')">CONTACTO</button>
</div>

<section id="galeria" class="active">
<div id="gallery"></div>
</section>

<section id="chat">
<h2>üí¨ CHAT GLOBAL</h2>
<div id="chatBox"></div>
<div class="chat-controls">
<input id="chatName" maxlength="16">
<input id="chatMsg" placeholder="Mensaje...">
<button onclick="sendMessage()">ENVIAR</button>
</div>
</section>

<section id="ranking">
<h2>üèÜ RANKING DE USUARIOS</h2>
<div id="rankingList"></div>
</section>

<section id="contacto">
<h2>üì© CONTACTO</h2>
<p>Instagram: <a href="#">@bettoblaespp</a></p>
<p>Email: contacto@bettoblaespp.com</p>
</section>

<div class="modal" id="modal" onclick="this.classList.remove('active')">
<img id="modalImg">
</div>

<div id="notifyBell" onclick="toggleNotify()">
üîî
<div id="notifyCount">0</div>
</div>

<div id="notifyPanel"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import { getDatabase, ref, push, onValue, set, update, query, orderByChild, limitToLast } 
from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

const firebaseConfig={
apiKey:"AIzaSyAUlqdn5gBdF3J4dfk690t48xXF_oofqFc",
authDomain:"base-de-datos-para-pagina.firebaseapp.com",
databaseURL:"https://base-de-datos-para-pagina-default-rtdb.firebaseio.com",
projectId:"base-de-datos-para-pagina",
storageBucket:"base-de-datos-para-pagina.firebasestorage.app",
messagingSenderId:"427794640215",
appId:"1:427794640215:web:22ce4fa44954e572c3e212"
};

const app=initializeApp(firebaseConfig);
const db=getDatabase(app);

if(!localStorage.getItem("user")){
localStorage.setItem("user","USER#"+Math.floor(1000+Math.random()*9000));
}
const USER=localStorage.getItem("user");
chatName.value=USER;

// SECCIONES
window.showSection=function(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
document.querySelectorAll(".filters button").forEach(b=>b.classList.remove("active"));
event.target.classList.add("active");
}

// IM√ÅGENES
const images={
ILUSTRACION:["ILUSTRACION/1.png","ILUSTRACION/2.png","ILUSTRACION/3.png"]
};

function loadImages(){
gallery.innerHTML="";
images.ILUSTRACION.forEach(src=>{
gallery.innerHTML+=`
<div class="image-container">
<img src="${src}" onclick="openModal('${src}')">
</div>`;
});
}
loadImages();

// CHAT
const chatRef=ref(db,"chat");

window.sendMessage=function(){
if(!chatMsg.value.trim())return;
push(chatRef,{name:chatName.value,text:chatMsg.value,time:Date.now()});
chatMsg.value="";
}

onValue(chatRef,snap=>{
chatBox.innerHTML="";
snap.forEach(c=>{
chatBox.innerHTML+=`<div class="chat-msg"><span>${c.val().name}:</span> ${c.val().text}</div>`;
});
chatBox.scrollTop=chatBox.scrollHeight;
});

// RANKING
const usersRef=ref(db,"users");

onValue(usersRef,snap=>{
rankingList.innerHTML="";
const arr=[];
snap.forEach(u=>arr.push(u.val()));
arr.sort((a,b)=>b.xp-a.xp);
arr.forEach((u,i)=>{
rankingList.innerHTML+=`<div>#${i+1} <b>${u.name}</b> ‚Äî <span class="rank">${u.xp||0} XP</span></div>`;
});
});

// NOTIFICACIONES
window.toggleNotify=function(){
notifyPanel.style.display = notifyPanel.style.display=="block"?"none":"block";
}

// NSFW
window.askNSFW=function(){
alert("Zona NSFW protegida üîû Acceso restringido");
}

// MODAL
window.openModal=function(src){
modalImg.src=src;
modal.classList.add("active");
}
</script>

</body>
</html>
